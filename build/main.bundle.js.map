{"version":3,"sources":["webpack:///webpack/bootstrap 0f4ca1a827598841cb52","webpack:///./js/constants.js","webpack:///./js/array-helpers.js","webpack:///./js/resource-manager.js","webpack:///./js/state-manager.js","webpack:///./js/text.js","webpack:///./js/dynamic-entity.js","webpack:///./js/world.js","webpack:///./js/play-state.js","webpack:///./js/ai-enemy.js","webpack:///./js/block.js","webpack:///./js/bullet.js","webpack:///./js/button.js","webpack:///./js/entity.js","webpack:///./js/menu-state.js","webpack:///./js/tank.js","webpack:///./js/game.js","webpack:///./js/animation.js","webpack:///./js/destroyable-block.js","webpack:///./js/end-state.js","webpack:///./js/input-processor.js","webpack:///./js/level-manager.js","webpack:///./js/level.js","webpack:///./js/main.js","webpack:///./js/player.js","webpack:///./js/progress-bar.js","webpack:///./js/renderer.js","webpack:///./js/results-state.js"],"names":["BLOCK_SIZE","BLOCK_HEALTH","TANK_WIDTH","TANK_HEIGHT","TANK_SPEED","TANK_HEALTH","TANK_COOLDOWN","TANK_DAMAGE","BULLET_SIZE","BULLET_SPEED","TANK_SCORE","MAX_ENEMIES_COUNT","TEXTURE_PATH","TEXTURE_BASE","TEXTURE_TILE_SIZE","last","array","length","undefined","remove","item","index","indexOf","splice","random","Math","floor","ResourceManager","sheet","base","width","height","config","block","frames","startFrame","destroyable_block","bullet","green_tank","blue_tank","init","path","Image","src","get","key","Object","assign","StateManager","states","update","input","getDrawable","changeState","state","pop","destroy","push","args","alignments","LEFT","CENTER","RIGHT","Text","result","x","text","y","align","size","color","content","context","save","fillStyle","font","fillText","restore","value","toString","axis","X","Y","directions","TOP","BOTTOM","angles","DynamicEntity","texture","speed","direction","currentAxis","object","isMove","World","entities","player","level","getMap","tank","step","control","filter","entity","forEach","checkCollision","e","collide","PlayState","levelManager","world","interval","healthBar","next","err","setInterval","addEnemy","bind","getHealth","scoreLabel","scoreValue","score","newEnemy","checkStatus","winScore","current","clearInterval","endGame","reset","AIEnemy","shootingInterval","shoot","cooldown","call","keys","hitBy","Block","Bullet","owner","tankWidth","tankHeight","hit","Button","callback","event","handler","pageY","Entity","animation","angle","play","setTransform","translate","angleInRadians","PI","rotate","drawImage","MenuState","components","eventsHandler","mouseClick","window","addEventListener","removeEventListener","c","component","click","Tank","health","isCooldown","action","setTimeout","addScore","Game","renderer","resources","start","process","render","requestAnimationFrame","Animation","tileSet","currentFrame","isRun","DestroyableBlock","results","win","label","lose","EndState","InputProcessor","map","includes","keyCode","LevelManager","levels","currentLevel","Error","Level","tiles","class","split","replace","tile","i","Class","onload","ready","Player","ProgressBar","max","fillRect","ratio","Renderer","mount","canvas","document","createElement","getContext","getElementById","appendChild","drawables","clear","drawable","draw","clearRect","ResultsState"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0f4ca1a827598841cb52","export const BLOCK_SIZE = 40;\nexport const BLOCK_HEALTH = 100;\nexport const TANK_WIDTH = 40;\nexport const TANK_HEIGHT = 40;\nexport const TANK_SPEED = 3;\nexport const TANK_HEALTH = 50;\nexport const TANK_COOLDOWN = 1000;\nexport const TANK_DAMAGE = 100;\nexport const BULLET_SIZE = 20;\nexport const BULLET_SPEED = 10;\nexport const TANK_SCORE = 50;\nexport const MAX_ENEMIES_COUNT = 4;\nexport const TEXTURE_PATH = './images/tiles.png';\nexport const TEXTURE_BASE = 8;\nexport const TEXTURE_TILE_SIZE = 84;\n\n\n\n// WEBPACK FOOTER //\n// ./js/constants.js","const last = function last(array) {\n  return array.length > 0 ? array[array.length - 1] : undefined;\n};\n\nconst remove = function remove(array, item) {\n  const index = array.indexOf(item);\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n};\n\nconst random = function random(array) {\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nexport { last, remove, random };\n\n\n\n// WEBPACK FOOTER //\n// ./js/array-helpers.js","const ResourceManager = {\n  sheet: null,\n  base: 1,\n  width: 0,\n  height: 0,\n  config: {\n    block: {\n      frames: 1,\n      startFrame: 26,\n    },\n    destroyable_block: {\n      frames: 1,\n      startFrame: 30,\n    },\n    bullet: {\n      frames: 1,\n      startFrame: 20,\n    },\n    green_tank: {\n      frames: 8,\n      startFrame: 1,\n    },\n    blue_tank: {\n      frames: 8,\n      startFrame: 9,\n    },\n  },\n  init: function init(path, base, width, height) {\n    this.sheet = new Image();\n        // tileSheet.addEventListener('load', eventSheetLoaded , false);\n    this.sheet.src = path;\n    this.base = base;\n    this.width = width;\n    this.height = height;\n  },\n  get: function get(key) {\n    return Object.assign({\n      sheet: this.sheet,\n      base: this.base,\n      width: this.width,\n      height: this.height,\n    }, this.config[key]);\n  },\n};\n\nexport default ResourceManager;\n\n\n\n// WEBPACK FOOTER //\n// ./js/resource-manager.js","import { last } from './array-helpers';\n// tmp\nimport MenuState from './menu-state';\n\nconst StateManager = {\n  states: [MenuState],\n  init: function init(...args) {\n    last(this.states).init(...args);\n  },\n  update: function update(input) {\n    last(this.states).update(input);\n  },\n  getDrawable: function getDrawable() {\n    return last(this.states).getDrawable();\n  },\n  changeState: function changeState(state, ...args) {\n    this.states.pop().destroy();\n    this.states.push(state);\n    this.init(...args);\n  },\n};\n\nexport default StateManager;\n\n\n\n// WEBPACK FOOTER //\n// ./js/state-manager.js","const alignments = {\n  LEFT: 'LEFT',\n  CENTER: 'CENTER',\n  RIGHT: 'RIGHT',\n};\n\nclass Text {\n  static get align() {\n    const result = {};\n    result[alignments.LEFT] = x => x;\n    result[alignments.CENTER] = (x, width) => x - (width / 2);\n    result[alignments.RIGHT] = (x, width) => x - width;\n    return result;\n  }\n\n  constructor(text, x, y, align = alignments.LEFT, size = 30, color = 'black') {\n    this.x = x;\n    this.y = y;\n    this.content = text;\n    this.align = align;\n    this.height = size;\n    this.color = color;\n  }\n\n  draw(context) {\n    context.save();\n    context.fillStyle = this.color;\n    context.font = `${this.height}px \"Press Start 2P\", cursive`;\n    context.fillText(\n      this.content,\n      Text.align[this.align](this.x, this.content.length * this.height),\n      this.y);\n    context.restore();\n  }\n\n  set text(value) {\n    this.content = value.toString();\n  }\n}\n\nexport { alignments };\n\nexport default Text;\n\n\n\n// WEBPACK FOOTER //\n// ./js/text.js","import Entity from './entity';\n\nconst axis = {\n  X: 'X',\n  Y: 'Y',\n};\n\nconst directions = {\n  TOP: 'TOP',\n  BOTTOM: 'BOTTOM',\n  LEFT: 'LEFT',\n  RIGHT: 'RIGHT',\n};\n\nconst angles = {\n  TOP: 0,\n  BOTTOM: 180,\n  LEFT: 270,\n  RIGHT: 90,\n};\n\nclass DynamicEntity extends Entity {\n  constructor(width, height, x, y, texture) {\n    super(width, height, x, y, texture);\n    this.speed = {\n      x: 0,\n      y: 0,\n    };\n    this.direction = directions.TOP;\n  }\n\n  update(currentAxis) {\n    if (currentAxis === axis.X) {\n      this.x += this.speed.x;\n    } else {\n      this.y += this.speed.y;\n    }\n  }\n\n  collide(object, currentAxis) {\n    if (currentAxis === axis.X && this.speed.x !== 0) {\n      if (this.x < object.x) {\n        this.x = object.x - this.width;\n      } else {\n        this.x = object.x + object.width;\n      }\n      this.speed.x = 0;\n    }\n    if (currentAxis === axis.Y && this.speed.y !== 0) {\n      if (this.y < object.y) {\n        this.y = object.y - this.height;\n      } else {\n        this.y = object.y + object.height;\n      }\n      this.speed.y = 0;\n    }\n  }\n\n  draw(context) {\n    const isMove = this.speed.x !== 0 || this.speed.y !== 0;\n    super.draw(context, angles[this.direction], isMove);\n  }\n}\n\nexport { axis, directions };\n\nexport default DynamicEntity;\n\n\n\n// WEBPACK FOOTER //\n// ./js/dynamic-entity.js","import Player from './player';\nimport DynamicEntity, { axis } from './dynamic-entity';\nimport AIEnemy from './ai-enemy';\nimport Bullet from './bullet';\n\nconst World = {\n  entities: [],\n  player: Player,\n  init: function init(level) {\n    this.entities = level.getMap();\n    this.player.init();\n    this.entities.push(this.player.tank);\n  },\n  step: function step(input) {\n    this.player.control(input.pop());\n    this.entities.filter(entity => entity instanceof AIEnemy)\n    .forEach(entity => entity.control());\n    this.entities.filter(entity => entity instanceof DynamicEntity)\n    .forEach(entity => entity.update(axis.X));\n    this.checkCollision(axis.X);\n    this.entities.filter(entity => entity instanceof DynamicEntity)\n    .forEach(entity => entity.update(axis.Y));\n    this.checkCollision(axis.Y);\n  },\n  checkCollision: function checkCollision(currentAxis) {\n    this.entities.filter(entity => entity instanceof DynamicEntity)\n    .forEach(entity =>\n      this.entities.filter(e => !(e instanceof Bullet))\n      .forEach((e) => {\n        if (entity !== e) {\n          if (entity.x < e.x + e.width &&\n            entity.x + entity.width > e.x &&\n            entity.y < e.y + e.height &&\n            entity.height + entity.y > e.y) {\n            entity.collide(e, currentAxis);\n          }\n        }\n      }));\n  },\n};\n\nexport default World;\n\n\n\n// WEBPACK FOOTER //\n// ./js/world.js","import LevelManager from './level-manager';\n\nimport { MAX_ENEMIES_COUNT } from './constants';\n\nimport AIEnemy from './ai-enemy';\nimport World from './world';\nimport StateManager from './state-manager';\nimport ResultsState from './results-state';\nimport EndState from './end-state';\nimport Text, { alignments } from './text';\nimport ProgressBar from './progress-bar';\n\nconst PlayState = {\n  levelManager: LevelManager,\n  world: World,\n  interval: null,\n  healthBar: null,\n  init: function init() {\n    try {\n      this.world.init(this.levelManager.next());\n    } catch (err) {\n      StateManager.changeState(EndState, 'win');\n    }\n    this.interval = setInterval(this.addEnemy.bind(this), 5000);\n    this.healthBar = new ProgressBar(0, 600, 1200, 50, this.world.player.getHealth());\n    this.scoreLabel = new Text('Score', 1150, 100, alignments.RIGHT);\n    this.scoreValue = new Text(0, 1150, 150, alignments.RIGHT);\n  },\n  update: function update(input) {\n    this.world.step(input);\n    this.healthBar.update(this.world.player.getHealth());\n    this.scoreValue.text = this.world.player.score;\n  },\n  getDrawable: function getDrawable() {\n    return [...this.world.entities, this.healthBar, this.scoreLabel, this.scoreValue];\n  },\n  addEnemy: function addEnemy() {\n    if (this.world.entities.filter(e => e instanceof AIEnemy).length > MAX_ENEMIES_COUNT) {\n      return;\n    }\n    const newEnemy = new AIEnemy(480, 50);\n    this.world.entities.push(newEnemy);\n  },\n  checkStatus: function checkStatus(player) {\n    if (player.score >= this.levelManager.winScore()\n      && this.world.entities.filter(e => e instanceof AIEnemy).length === 0) {\n      StateManager.changeState(\n        ResultsState,\n        this.levelManager.current(),\n        this.world.player.score);\n    }\n  },\n  destroy: function destroy() {\n    clearInterval(this.interval);\n    this.world.entities.filter(e => e instanceof AIEnemy).forEach(entity => entity.destroy());\n  },\n  endGame: function endGame() {\n    StateManager.changeState(EndState, 'lose');\n    this.levelManager.reset();\n  },\n};\n\nexport default PlayState;\n\n\n\n// WEBPACK FOOTER //\n// ./js/play-state.js","import Tank from './tank';\nimport { directions } from './dynamic-entity';\nimport ResourceManager from './resource-manager';\nimport { random } from './array-helpers';\n\nclass AIEnemy extends Tank {\n  constructor(x, y) {\n    super(x, y, ResourceManager.get('blue_tank'));\n    this.shootingInterval = setInterval(this.shoot.bind(this), this.cooldown);\n  }\n\n  control() {\n    super.control.call(this, this.direction);\n  }\n\n  collide(object, axis) {\n    super.collide.call(this, object, axis);\n    this.direction = random(Object.keys(directions));\n  }\n\n  hit(hitBy) {\n    if (!(hitBy instanceof AIEnemy)) {\n      super.hit.call(this, hitBy);\n    }\n  }\n\n  destroy() {\n    clearInterval(this.shootingInterval);\n  }\n}\n\nexport default AIEnemy;\n\n\n\n// WEBPACK FOOTER //\n// ./js/ai-enemy.js","import Entity from './entity';\n\nclass Block extends Entity {\n  constructor(size, x, y, texture) {\n    super(size, size, x, y, texture);\n  }\n}\n\nexport default Block;\n\n\n\n// WEBPACK FOOTER //\n// ./js/block.js","import DynamicEntity, { directions } from './dynamic-entity';\nimport ResourceManager from './resource-manager';\nimport { remove } from './array-helpers';\n\nimport World from './world';\n\nimport { BULLET_SIZE, BULLET_SPEED } from './constants';\n\nclass Bullet extends DynamicEntity {\n  constructor(owner, x, y, tankWidth, tankHeight, direction) {\n    super(BULLET_SIZE, BULLET_SIZE, x, y, ResourceManager.get('bullet'));\n    this.owner = owner;\n    this.direction = direction;\n    if (direction === directions.TOP) {\n      this.x = x + ((tankWidth - this.width) / 2);\n      this.y = y - this.height;\n      this.speed.y = -BULLET_SPEED;\n    } else if (direction === directions.BOTTOM) {\n      this.x = x + ((tankWidth - this.width) / 2);\n      this.y = y + tankHeight;\n      this.speed.y = BULLET_SPEED;\n    } else if (direction === directions.LEFT) {\n      this.x = x - this.width;\n      this.y = y + ((tankWidth - this.height) / 2);\n      this.speed.x = -BULLET_SPEED;\n    } else if (direction === directions.RIGHT) {\n      this.x = x + tankWidth;\n      this.y = y + ((tankWidth - this.height) / 2);\n      this.speed.x = BULLET_SPEED;\n    }\n  }\n\n  collide(object) {\n    remove(World.entities, this);\n    if (typeof object.hit === 'function') {\n      object.hit(this.owner);\n    }\n  }\n}\n\nexport default Bullet;\n\n\n\n// WEBPACK FOOTER //\n// ./js/bullet.js","import Text, { alignments } from './text';\n\nclass Button extends Text {\n  constructor(text, x, y, callback) {\n    super(text, x, y, alignments.CENTER);\n    this.event = null;\n    this.handler = callback;\n  }\n\n  click(event) {\n    if (event.pageY > this.y - this.height && event.pageY < this.y) {\n      this.handler();\n    }\n  }\n}\n\nexport default Button;\n\n\n\n// WEBPACK FOOTER //\n// ./js/button.js","import Animation from './animation';\n\nclass Entity {\n  constructor(width, height, x, y, texture) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    this.animation = new Animation(\n      texture.sheet,\n      texture.base,\n      texture.frames,\n      texture.width,\n      texture.height,\n      texture.startFrame);\n  }\n\n  draw(context, angle = 0, play = true) {\n    this.animation.step((texture, x, y, width, height) => {\n      if (angle !== 0) {\n        context.save();\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        context.translate(this.x + (this.width / 2), this.y + (this.height / 2));\n        const angleInRadians = (angle * Math.PI) / 180;\n        context.rotate(angleInRadians);\n\n        context.drawImage(\n          texture,\n          x,\n          y,\n          width,\n          height,\n          -this.width / 2,\n          -this.height / 2,\n          this.width,\n          this.height);\n\n        context.restore();\n      } else {\n        context.drawImage(texture, x, y, width, height, this.x, this.y, this.width, this.height);\n      }\n    }, play);\n  }\n}\n\nexport default Entity;\n\n\n\n// WEBPACK FOOTER //\n// ./js/entity.js","import Button from './button';\nimport Text, { alignments } from './text';\n\nimport StateManager from './state-manager';\nimport PlayState from './play-state';\n\nconst MenuState = {\n  components: [],\n  init: function init() {\n    this.eventsHandler = this.mouseClick.bind(this);\n    window.addEventListener('click', this.eventsHandler);\n    this.components = [];\n    this.components.push(new Text('World of Tanks', 600, 150, alignments.CENTER));\n    this.components.push(new Button('Play', 600, 350, () => {\n      StateManager.changeState(PlayState);\n    }));\n  },\n  update: function update() {\n\n  },\n  getDrawable: function getDrawable() {\n    return this.components;\n  },\n  destroy: function destroy() {\n    window.removeEventListener('click', this.eventsHandler);\n  },\n  mouseClick: function mouseClick(event) {\n    this.components.filter(c => c instanceof Button).forEach(component => component.click(event));\n  },\n};\n\nexport default MenuState;\n\n\n\n// WEBPACK FOOTER //\n// ./js/menu-state.js","import DynamicEntity, { directions } from './dynamic-entity';\nimport Bullet from './bullet';\n\nimport { remove } from './array-helpers';\nimport { TANK_COOLDOWN, TANK_DAMAGE, TANK_HEALTH, TANK_HEIGHT, TANK_SPEED, TANK_WIDTH } from './constants';\n\nimport World from './world';\n\nclass Tank extends DynamicEntity {\n  constructor(x, y, texture, health = TANK_HEALTH) {\n    super(TANK_WIDTH, TANK_HEIGHT, x, y, texture);\n    this.health = health;\n    this.cooldown = TANK_COOLDOWN;\n    this.isCooldown = false;\n  }\n\n  control(action) {\n    this.speed.x = 0;\n    this.speed.y = 0;\n    if (action === 'TOP') {\n      this.direction = directions.TOP;\n      this.speed.y = -TANK_SPEED;\n    } else if (action === 'BOTTOM') {\n      this.direction = directions.BOTTOM;\n      this.speed.y = TANK_SPEED;\n    } else if (action === 'LEFT') {\n      this.direction = directions.LEFT;\n      this.speed.x = -TANK_SPEED;\n    } else if (action === 'RIGHT') {\n      this.direction = directions.RIGHT;\n      this.speed.x = TANK_SPEED;\n    } else if (action === 'SPACE') {\n      this.shoot();\n    }\n  }\n\n  shoot() {\n    if (this.isCooldown) {\n      return;\n    }\n    World.entities.push(new Bullet(this, this.x, this.y, this.width, this.height, this.direction));\n    this.isCooldown = true;\n    setTimeout(() => { this.isCooldown = false; }, this.cooldown);\n  }\n\n  hit(hitBy) {\n    this.health -= TANK_DAMAGE;\n    if (this.health <= 0) {\n      if (this === World.player.tank) {\n        World.player.destroy();\n        return;\n      }\n      remove(World.entities, this);\n      this.destroy();\n      if (hitBy === World.player.tank) {\n        World.player.addScore();\n      }\n    }\n  }\n}\n\nexport default Tank;\n\n\n\n// WEBPACK FOOTER //\n// ./js/tank.js","import InputProcessor from './input-processor';\nimport Renderer from './renderer';\nimport StateManager from './state-manager';\nimport ResourceManager from './resource-manager';\n// import SoundManager from './sound-manager';\n\nimport { TEXTURE_PATH, TEXTURE_BASE, TEXTURE_TILE_SIZE } from './constants';\n\nconst Game = {\n  input: InputProcessor,\n  renderer: Renderer,\n  state: StateManager,\n  resources: ResourceManager,\n  // sounds: SoundManager,\n  start: function start() {\n    this.resources.init(TEXTURE_PATH, TEXTURE_BASE, TEXTURE_TILE_SIZE, TEXTURE_TILE_SIZE);\n    // this.sounds.init(['sound.wav']);\n    this.input.init(window);\n    this.renderer.init();\n    this.state.init();\n    this.update();\n  },\n  update: function update() {\n    this.state.update(this.input.process());\n    this.renderer.render(this.state.getDrawable());\n    requestAnimationFrame(this.update.bind(this));\n  },\n};\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./js/game.js","class Animation {\n  constructor(tileSet, base, frames, width, height, startFrame = 0) {\n    this.tileSet = tileSet;\n    this.base = base;\n    this.frames = frames;\n    this.width = width;\n    this.height = height;\n    this.startFrame = startFrame;\n    this.currentFrame = startFrame;\n  }\n\n  step(callback, isRun = true) {\n    const x = Math.floor(this.currentFrame % this.base) * this.width;\n    const y = Math.floor(this.currentFrame / this.base) * this.height;\n\n    callback(this.tileSet, x, y, this.width, this.height);\n\n    if (!isRun) {\n      return;\n    }\n\n    this.currentFrame += 1;\n    if (this.currentFrame >= this.startFrame + this.frames) {\n      this.currentFrame = this.startFrame;\n    }\n  }\n}\n\nexport default Animation;\n\n\n\n// WEBPACK FOOTER //\n// ./js/animation.js","import Block from './block';\n\nimport { remove } from './array-helpers';\nimport { BLOCK_HEALTH, TANK_DAMAGE } from './constants';\n\nimport World from './world';\n\nclass DestroyableBlock extends Block {\n  constructor(size, x, y, texture) {\n    super(size, x, y, texture);\n    this.health = BLOCK_HEALTH;\n  }\n\n  hit() {\n    this.health -= TANK_DAMAGE;\n    if (this.health <= 0) {\n      remove(World.entities, this);\n    }\n  }\n}\n\nexport default DestroyableBlock;\n\n\n\n// WEBPACK FOOTER //\n// ./js/destroyable-block.js","import Button from './button';\nimport Text, { alignments } from './text';\n\nimport StateManager from './state-manager';\nimport MenuState from './menu-state';\n\nconst results = {\n  win: {\n    label: 'Victory',\n  },\n  lose: {\n    label: 'Game over',\n  },\n};\n\nconst EndState = {\n  components: [],\n  init: function init(result) {\n    this.eventsHandler = this.mouseClick.bind(this);\n    window.addEventListener('click', this.eventsHandler);\n    this.components = [];\n    this.components.push(new Text(results[result].label, 600, 150, alignments.CENTER));\n    this.components.push(new Button('Back to menu', 600, 350, () => {\n      StateManager.changeState(MenuState);\n    }));\n  },\n  update: function update() {\n\n  },\n  getDrawable: function getDrawable() {\n    return this.components;\n  },\n  destroy: function destroy() {\n    window.removeEventListener('click', this.eventsHandler);\n  },\n  mouseClick: function mouseClick(event) {\n    this.components.filter(c => c instanceof Button).forEach(component => component.click(event));\n  },\n};\n\nexport default EndState;\n\n\n\n// WEBPACK FOOTER //\n// ./js/end-state.js","const InputProcessor = {\n  map: {\n    37: 'LEFT',\n    38: 'TOP',\n    39: 'RIGHT',\n    40: 'BOTTOM',\n    32: 'SPACE',\n  },\n  keys: [],\n  init: function init(handler) {\n    handler.addEventListener('keydown', (e) => {\n      if (!this.keys.includes(e.keyCode)) {\n        this.keys.push(e.keyCode);\n      }\n    });\n    handler.addEventListener('keyup', (e) => {\n      this.keys.splice(this.keys.indexOf(e.keyCode), 1);\n    });\n  },\n  process: function process() {\n    return this.keys.map(key => this.map[key]);\n  },\n};\n\nexport default InputProcessor;\n\n\n\n// WEBPACK FOOTER //\n// ./js/input-processor.js","import Level from './level';\n\nconst LevelManager = {\n  levels: [\n    {\n      map:\n`########################\n#  %                %  #\n#  %        #       %  #\n#  %                %  #\n#  % %############% %  #\n#  %  %          %  %  #\n#     %          %     #\n#   %%%%%%%%%%%%%%%%   #\n#                      #\n#### %%%%%%%%%%%%%% ####\n#          %%          #\n#   %%%%%%%%%%%%%%%%   #\n#     %          %     #\n#     %          %     #\n########################\n`,\n      score: 200,\n    },\n    {\n      map:\n`########################\n#                      #\n#      %%%%%%%%%%      #\n#  %                %  #\n#  %                %  #\n#%%%%%%%%%%%%%%%%%%%%%%#\n#         % %          #\n#######   % %    #######\n#         % %          #\n####      % %       ####\n#         % %          #\n#   %%%%%%%%%%%%%%%%   #\n#     %          %     #\n#     %          %     #\n########################\n`,\n      score: 300,\n    },\n    {\n      map:\n`########################\n#   #              #   #\n#   #              #   #\n#                      #\n#                      #\n#                      #\n# %%%%%%%%%%%%%%%%%%%%%#\n#                      #\n#%%%%%%%%%%%%%%%%%%%%% #\n#                      #\n# %%%%%%%%%%%%%%%%%%%%%#\n#                      #\n#%%%%%%%%%%%%%%%%%%%%% #\n#                      #\n########################\n`,\n      score: 500,\n    },\n    {\n      map:\n`########################\n#                      #\n#      %         %     #\n#      %         %     #\n#%%%%%%%%%%%%%%%%%%%%%%#\n#           %          #\n#           %          #\n# #################### #\n#                      #\n#%%%%%%%%%%%%%%%%%%%%%%#\n#%%%%%%%%%%%%%%%%%%%%%%#\n#                      #\n#                      #\n#                      #\n########################\n`,\n      score: 1000,\n    },\n    {\n      map:\n`########################\n#                      #\n#  ####%%%%%%%%%%####  #\n#  %                %  #\n#  %                %  #\n#%%%%%%%%%%%%%%%%%%%%%%#\n#         % %          #\n#######   %#%    #######\n#         % %          #\n####      %#%       ####\n#         % %          #\n####%%%%%%%%%%%%%%%%####\n#     %    #     %     #\n#     %          %     #\n########################\n`,\n      score: 1500,\n    },\n  ],\n  currentLevel: -1,\n  winScore: function winScore() {\n    return this.levels[this.currentLevel].score;\n  },\n  current: function current() {\n    return this.currentLevel + 1;\n  },\n  next: function next() {\n    this.currentLevel += 1;\n    if (this.currentLevel >= this.levels.length) {\n      this.currentLevel = -1;\n      throw new Error('No more levels');\n    }\n    return new Level(this.levels[this.currentLevel].map);\n  },\n  reset: function reset() {\n    this.currentLevel = -1;\n  },\n};\n\nexport default LevelManager;\n\n\n\n// WEBPACK FOOTER //\n// ./js/level-manager.js","import Block from './block';\nimport DestroyableBlock from './destroyable-block';\nimport ResourceManager from './resource-manager';\n\nimport { BLOCK_SIZE } from './constants';\n\nclass Level {\n  constructor(map) {\n    this.map = map;\n  }\n\n  getMap() {\n    const tiles = {\n      '#': {\n        class: Block,\n        texture: ResourceManager.get('block'),\n      },\n      '%': {\n        class: DestroyableBlock,\n        texture: ResourceManager.get('destroyable_block'),\n      },\n    };\n    const width = this.map.split('\\n')[0].length;\n    return this.map.replace(/\\n/g, '').split('').map((tile, i) => {\n      if (tile in tiles) {\n        const Class = tiles[tile].class;\n        return new Class(\n          BLOCK_SIZE,\n          BLOCK_SIZE * (i % width),\n          BLOCK_SIZE * Math.floor(i / width),\n          tiles[tile].texture);\n      }\n      return null;\n    }).filter(i => i);\n  }\n}\n\nexport default Level;\n\n\n\n// WEBPACK FOOTER //\n// ./js/level.js","import Game from './game';\n\nwindow.onload = function ready() {\n  Game.start();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","import Tank from './tank';\nimport ResourceManager from './resource-manager';\n\nimport { TANK_SCORE, TANK_HEALTH } from './constants';\n\nimport PlayState from './play-state';\n\nconst Player = {\n  tank: null,\n  score: 0,\n  init: function init() {\n    this.score = 0;\n    this.tank = new Tank(480, 520, ResourceManager.get('green_tank'), TANK_HEALTH * 10);\n  },\n  control: function control(action) {\n    this.tank.control(action);\n  },\n  addScore: function addScore() {\n    this.score += TANK_SCORE;\n    PlayState.checkStatus(this);\n  },\n  getHealth: function getHealth() {\n    return this.tank.health;\n  },\n  destroy: function destroy() {\n    PlayState.endGame();\n  },\n};\n\nexport default Player;\n\n\n\n// WEBPACK FOOTER //\n// ./js/player.js","class ProgressBar {\n  constructor(x, y, width, height, max, color = '#00cc00') {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.color = color;\n    this.max = max;\n    this.value = this.width;\n  }\n\n  draw(context) {\n    context.save();\n    context.fillStyle = this.color;\n    context.fillRect(this.x, this.y, this.value, this.height);\n    context.restore();\n  }\n\n  update(value) {\n    const ratio = value / this.max;\n    this.value = this.width * ratio;\n    if (ratio >= 0.60 && ratio < 0.90) {\n      this.color = '#99ff33';\n    } else if (ratio >= 0.30 && ratio < 0.60) {\n      this.color = '#ffff00';\n    } else if (ratio < 0.30) {\n      this.color = '#ff9900';\n    }\n  }\n}\n\nexport default ProgressBar;\n\n\n\n// WEBPACK FOOTER //\n// ./js/progress-bar.js","const Renderer = {\n  config: {\n    width: 1200,\n    height: 650,\n    mount: 'root',\n  },\n  canvas: null,\n  init: function init() {\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.config.width;\n    this.canvas.height = this.config.height;\n    this.context = this.canvas.getContext('2d');\n    document.getElementById(this.config.mount).appendChild(this.canvas);\n  },\n  render: function render(drawables) {\n    this.clear();\n    drawables.forEach((drawable) => {\n      drawable.draw(this.context);\n    });\n  },\n  clear: function clear() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  },\n};\n\nexport default Renderer;\n\n\n\n// WEBPACK FOOTER //\n// ./js/renderer.js","import Text, { alignments } from './text';\n\nimport StateManager from './state-manager';\nimport PlayState from './play-state';\n\nconst ResultsState = {\n  components: [],\n  init: function init(level, score) {\n    this.components = [];\n    // this.components.push(new Text('', 600, 50, 'center'));\n    this.components.push(new Text(`Level ${level}`, 600, 150, alignments.CENTER));\n    this.components.push(new Text(`Score: ${score}`, 600, 250, alignments.CENTER));\n    setTimeout(StateManager.changeState.bind(StateManager, PlayState), 3000);\n  },\n  update: function update() {\n\n  },\n  getDrawable: function getDrawable() {\n    return this.components;\n  },\n  destroy: function destroy() {\n\n  },\n};\n\nexport default ResultsState;\n\n\n\n// WEBPACK FOOTER //\n// ./js/results-state.js"],"sourceRoot":""}